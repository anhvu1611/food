<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../Bootstrap/bootstrap.min.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function(){
            $('#openModal').click(
                function(){
                    $('#myModal').modal()
                }
            )

            function checkGiaTour(){
                let giaTour = $('#giaTour').val()
                let e_giaTour = $('#e_giaTour').val()
                if(giaTour.trim()==""){
                    $('#e_giaTour').html('Phai nhap gia tour')
                    return false
                }
                if(giaTour<=0){
                    $('#e_giaTour').html('Gia tour phai > 0')
                    return false
                }
                if(isNaN(giaTour)){
                    $('#e_giaTour').html('phai la so')
                    return false
                }
                $('#e_giaTour').html('*')
                return true             
            }
            $('#giaTour').blur(checkGiaTour)

            function checkNgayKhoiHanh(){
                let ngayKhoiHanh = new Date($('#ngayKhoiHanh').val())
                let today = new Date()
                today.setDate(today.getDay()+30)
                let e_ngayKhoiHanh = $('#e_ngayKhoiHanh').val()
                if(ngayKhoiHanh<today){
                    $('#e_ngayKhoiHanh').html('Phai sau ngay hien tai 30 ngay')
                    return false
                }
                $('#e_ngayKhoiHanh').html('*')
                return true
            }
            $('#ngayKhoiHanh').blur(checkNgayKhoiHanh)

            function checkMaTour(){
                let maTour = $('#maTour').val()
                let r_maTour = /^[A-Z]{3}\-[A-Z]{3}\-\d{2}\-\d{4}$/
                let e_maTour = $('#e_maTour').val()
                if(maTour.trim()==''){
                    $('#e_maTour').html('bat buoc')
                    return false
                }
                if(!r_maTour.test(maTour)){
                    $('#e_maTour').html('nhap theo dang XXX-XXX-mm-yyyy')
                    return false
                }
                $('#e_maTour').html('*')
                return true
            }
            $('#maTour').blur(checkMaTour)
            function checkFile(){
                let file = $('#file').val()
                let r_file = /(\.jpg|\.png|\.gif|\.JPG|\.PNG|\.GIF)$/
                let e_file = $('#e_file').val()
                if(!r_file.exec(file)){
                    $('#e_file').html('chon dung dinh dang')
                    return false
                }
                if(file.trim()==''){
                    $('#e_file').html('khong duoc de trong')
                    return false
                }
                $('#e_file').html('*')
                return true
            }
            $('#file').blur(checkFile)
            var i=0
            function valid(){
                let maTour = $('#maTour').val()
                let ngayKhoiHanh = $('#ngayKhoiHanh').val()
                let giaTour = $('#giaTour').val()
                let file = $('#file').val()
                const card = `
                    <tr>
                        <td>${i++}</td>
                        <td>${maTour}</td>
                        <td>${giaTour} ${ngayKhoiHanh}</td>
                        <td>${ngayKhoiHanh}</td>
                        <td></td>
                        <td>${giaTour}</td>
                        <td>${file}</td>   
                    </tr>
                
                `
                $('tbody').append(card)
                return true
            }
            $('#btn').click(valid)
        })
    </script>
</head>
<body>
    <!-- modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="text-center">THONG TIN TOUR</h2>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-3 text-right">
                            <label for="">Ma tour</label>
                        </div>
                        <div class="col-9">
                            <input type="text" class="form-control" id="maTour">
                            <span class="text-danger" id="e_maTour">*</span>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-3 text-right">
                            <label for="">Hanh trinh</label>
                        </div>
                        <div class="col-9">
                            <input type="text" class="form-control">
                            <span class="text-danger">*</span>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-3 text-right">
                            <label for="">Ngay khoi hanh</label>
                        </div>
                        <div class="col-9">
                            <input type="date" class="form-control" id="ngayKhoiHanh">
                            <span class="text-danger" id="e_ngayKhoiHanh">*</span>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-3 text-right">
                            <label for="">Thoi gian</label>
                        </div>
                        <div class="col-9">
                            <input type="text" class="form-control">
                            <span class="text-danger">*</span>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-3 text-right">
                            <label for="giaTour">Gia tour</label>
                        </div>
                        <div class="col-9">
                            <input type="text" class="form-control" id="giaTour">
                            <span class="text-danger"  id="e_giaTour">*</span>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-3 text-right">
                            <label for="">Anh dai dien</label>
                        </div>
                        <div class="col-9">
                            <input type="file" class="form-control" id="file">
                            <span class="text-danger" id="e_file">*</span>
                        </div>
                    </div>
                    <button class="btn-success btn-block" id="btn">Luu</button>
                </div>
            </div>
        </div>
    </div>
    <!-- content -->
    <div class="container">
        <div class="header border border-dark">
            <img src="../img/header.PNG" alt="" width="100%">
            <div class="navbar navbar-expand">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="" class="nav-link">Dang nhap</a>
                    </li>
                    <li class="nav-item" id="openModal">
                        <a class="nav-link">Mo tua moi</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="body border border-dark">
            <h5 class="text-center">DANH SACH TOUR - DU LICH VIET</h5>
            <table class="table table-striped">
                <thead class="table-borderless">
                    <tr>
                        <th>STT</th>
                        <th>Ma tour</th>
                        <th>Hanh trinh</th>
                        <th>Ngay khoi hanh</th>
                        <th>Thoi gian</th>
                        <th>Gia tour</th>
                        <th>Anh dai dien</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
        <div class="footer border border-dark">
            <footer class="text-center">Nguyen Anh Vu - 20096591</footer>
        </div>
    </div>
</body>
</html>